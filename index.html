<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CekRek â€” Cek Nama Rekening Indonesia</title>

  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #0e1628;
      color: #e8f1ff;
      display: flex;
      justify-content: center;
      padding: 30px;
    }
    .card {
      background: #142033;
      padding: 25px;
      border-radius: 12px;
      width: 100%;
      max-width: 650px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.4);
      border: 1px solid #1f2c44;
    }
    h1 {
      margin-top: 0;
      font-size: 22px;
      font-weight: 700;
    }
    label {
      display: block;
      margin-top: 15px;
      font-size: 14px;
      color: #b6c6dd;
    }
    select, input {
      width: 100%;
      padding: 10px 12px;
      margin-top: 6px;
      border-radius: 8px;
      border: 1px solid #25344d;
      background: #0d1627;
      color: white;
      font-size: 15px;
    }
    button {
      margin-top: 18px;
      padding: 12px;
      width: 100%;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      background: #00d2ff;
      color: #002a36;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    .result {
      margin-top: 18px;
      white-space: pre-wrap;
      padding: 15px;
      border-radius: 8px;
      background: #1a2a44;
      font-size: 15px;
    }
    .error {
      background: #482129;
      color: #ffd7d7;
    }
    footer {
      margin-top: 22px;
      font-size: 12px;
      color: #8fa2c0;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>CekRek - Cek Nama Rekening</h1>
    
    <label>Bank</label>
    <select id="bank">
      <option value="">-- Pilih Bank --</option>
      <option value="002">BRI (002)</option>
      <option value="014">BCA (014)</option>
      <option value="008">Mandiri (008)</option>
      <option value="009">BNI (009)</option>
      <option value="013">CIMB Niaga (013)</option>
      <option value="022">CIMB Niaga Syariah (022)</option>
      <option value="gopay">GoPay</option>
      <option value="ovo">OVO</option>
      <option value="dana">DANA</option>
    </select>

    <label>Nomor Rekening / e-Wallet</label>
    <input id="acct" type="text" placeholder="cth: 00290100012345" />

    <button id="btn">Cek Nama</button>

    <div id="out" class="result" style="display:none;"></div>

    <footer>Â© 2025 CekRek - Backend by FastAPI</footer>
  </div>

<script>
(() => {

  // ðŸ’¥ GANTI URL INI KE BACKEND KAMU
  const BACKEND_URL = "https://YOUR-BACKEND-URL/api/cek-bri";
  // contoh:
  // const BACKEND_URL = "https://cekrek-backend-1234.render.com/api/cek-bri";

  const bank = document.getElementById("bank");
  const acct = document.getElementById("acct");
  const btn = document.getElementById("btn");
  const out = document.getElementById("out");

  function show(msg, err = false) {
    out.style.display = "block";
    out.className = "result" + (err ? " error" : "");
    out.textContent = typeof msg === "object" ? JSON.stringify(msg, null, 2) : msg;
  }

  async function cek() {
    out.style.display = "none";

    if (!bank.value) {
      show("âŒ Pilih bank terlebih dahulu", true);
      return;
    }
    if (!acct.value.trim()) {
      show("âŒ Masukkan nomor rekening", true);
      return;
    }

    btn.disabled = true;
    btn.textContent = "Mengecek...";

    const payload = {
      bankcode: bank.value,
      accountnumber: acct.value.trim()
    };

    try {
      const resp = await fetch(BACKEND_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (!resp.ok) {
        const txt = await resp.text();
        show("âŒ ERROR SERVER (" + resp.status + "): " + txt, true);
        return;
      }

      const data = await resp.json();

      // ambil nama pemilik (format BRI)
      const name =
        data?.data?.accountName ||
        data?.data?.account_holder ||
        data?.account_holder ||
        JSON.stringify(data);

      show("âœ”ï¸ Nama Pemilik:\n" + name);
      
    } catch (e) {
      show("âŒ Tidak bisa menghubungi backend.\n" + e, true);
    } finally {
      btn.disabled = false;
      btn.textContent = "Cek Nama";
    }
  }

  btn.addEventListener("click", cek);
  acct.addEventListener("keypress", (e) => {
    if (e.key === "Enter") cek();
  });

})();
</script>
</body>
</html>
